## 2. μμ΅΄μ„± μ£Όμ…μ ν•„μ”μ„±

- μμ΅΄μ„± μ£Όμ… κΌ­ ν•΄μ•Όν•λ”κ°€

### λ³€κ²½μ μ „μ΄

- (μ•μ„ λ³΄μΈ μμ  μ½”λ“μ—μ„)cpuλ¥Ό λ³€κ²½ν•κ³  μ‹¶μ€ κ²½μ°

```kotlin
class Computer {
    private val cpu: A_CPU

    init {
        cpu = A_CPU()
    }
}
```
- CPUλ¥Ό μμ΅΄ν•κ³  μλ Computer ν΄λμ¤μ μ½”λ“ μμ •μ΄ ν•„μ”ν•κ²λλ‹¤...
- ν•λ‚μ ν΄λμ¤ λ³€κ²½μΌλ΅ λ‹¤λ¥Έ μμ΅΄ κ΄€κ³„ κΉμ§€ λ³€κ²½μ‚¬ν•­μ΄ μ „λ‹¬λ¨
- μ΄λ¥Ό μ„ν•΄ CPUλ¥Ό μΈν„°νμ΄μ¤λ΅ λ§λ“ λ‹¤λ©΄

```kotlin
interface CPU

class A_CPU : CPU

class Computer {
    private val cpu: CPU

    init {
        cpu = A_CPU()
        //cpu = new I_CPU()
    }
}
```

- μ΄λλ„ μμ΅΄μ„±μ΄ μƒκΈ΄λ‹¤
- Computer μ—μ„ CPUλ¥Ό μƒμ„±ν•κΈ° λ•λ¬Έμ— Computer ν΄λμ¤λ¥Ό μ–΄μ©”μμ—†μ΄ λ³€κ²½ν•΄μ•Όν•¨

### μ μ–΄μ μ—­μ „(IoC, Inversion of Control)

- νΉμ • μΌμ„ μν–‰ν•λ„λ΅ λ§λ“¤μ–΄μ§„ ν”„λ μ„μ›ν¬μ— μ μ–΄κ¶μ„ μ„μ„ -> κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬

```kotlin
class Computer {
    private var cpu: CPU? = null

    constructor() {}
    constructor(cpu: CPU) {
        this.cpu = cpu
    }

    fun setCPU(cpu: CPU) {
        this.cpu = cpu
    }
}

fun main() {
    val cpu = I_CPU()
    val computer1 = Computer(cpu)
    val computer2 = Computer()
    computer2.setCPU(cpu)
}
```

- μ™Έλ¶€λ΅ λ¶€ν„° CPUλ¥Ό μƒμ„±ν•΄μ„ μ£Όμ…μ‹ν‚¤κ³  μμ
- κ²°ν•©λ„λ¥Ό λ‚®μ·„λ‹¤!


### μμ΅΄μ„± μ£Όμ…μ μ¥λ‹¨μ 

- μ¥μ 
    1. μμ΅΄μ„± μ£Όμ…μ€ μΈν„°νμ΄μ¤λ¥Ό κΈ°λ°μΌλ΅ μ„¤κ³„λλ©°, μ½”λ“λ¥Ό μ μ—°ν•κ² ν•¨
    2. μ£Όμ…ν•λ” μ½”λ“λ§ λ”°λ΅ λ³€κ²½ν•κΈ° μ‰¬μ›. λ¦¬ν©ν† λ§ μμ›”
    3. μμ΅΄μ„± μ£Όμ…μ„ μ‚¬μ©ν•λ” κ²°κ³Όλ΅ stub λλ” mock κ°μ²΄λ¥Ό μ‚¬μ©ν•΄μ„ λ‹¨μ„ ν…μ¤νΈ ν•κΈ° λ” μ‰¬μ›μ§π‘
    4. ν΄λμ¤ κ°„ κ²°ν•©λ„λ¥Ό λμ¨ν•κ²
    5. μΈν„°νμ΄μ¤ κΈ°λ°μ΄λ―€λ΅ μ—¬λ¬ κ°λ°μκ°€ μ„λ΅ μ‚¬μ©ν•λ” ν΄λμ¤λ¥Ό λ…λ¦½μ μΌλ΅ κ°λ° κ°€λ¥ (ν΄λμ¤κ°„ μμ΅΄ν•λ” μΈν„°νμ΄μ¤λ§ μ•λ©΄λ¨)
- λ‹¨μ λ„ μλ‹¤
    1. κ°„λ‹¨ν• ν”„λ΅κ·Έλ¨μ„ λ§λ“¤λ•λ” λ²κ±°λ΅­λ‹¤.
    2. λ™μ‘κ³Ό κµ¬μ„±μ„ λ¶„λ¦¬ν•κ² λλ©΄μ„ μ½”λ“ μ¶”μ μ΄ μ–΄λ ¤μ›μ§€κ³  κ°€λ…μ„±μ„ λ–¨μ–΄λ¨λ¦΄ μ μμ (λ” λ§μ€ νμΌμ„ μ™€λ¦¬κ°€λ¦¬ ν•΄μ•Όν•¨)
    3. Dagger2μ™€ κ°™μ€ μμ΅΄μ„± μ£Όμ… ν”„λ μ„μ›ν¬λ” μ»΄νμΌ νƒ€μ„μ— μ• λ…Έν…μ΄μ… ν”„λ΅μ„Έμ„λ¥Ό μ΄μ©ν•μ—¬ νμΌμ„ μƒμ„±ν•λ―€λ΅ λΉλ“μ— μ‹κ°„ μ†μ”κ°€ μΆ€ λμ–΄λ‚λ‹¤.

<br/>

- μ§€μ†μ μΈ μ μ§€λ³΄μκ°€ ν•„μ”ν• μΌλ°μ μΈ μƒμ© μ•±μ κ²½μ°μ—λ” μ¥μ μ΄ λ”μ± λ§λ‹¤.
- μ½”λ“ κ°€λ…μ΄ μ–΄λ ¤μ›μ§€λ” κ²ƒμ€ μ μ‘ν•λ©΄ κ·Έλλ„ μμ›”ν•΄μ§ μ μμ. π‚
